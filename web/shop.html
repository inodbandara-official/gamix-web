<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gamix Shop</title>

  <link rel="shortcut icon" href="../assets/images/favicon.svg" type="image/svg+xml">
  <link rel="stylesheet" href="../assets/css/style.css">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Oxanium:wght@600;700;800&family=Poppins:wght@400;500;600;700;800;900&display=swap"
    rel="stylesheet">

</head>

<body id="top">

  <!-- header -->

  <header class="header">

    <div class="header-bottom new" data-header>
      <div class="container">

        <a href="#" class="logo">Gamix</a>

        <nav class="navbar" data-navbar>
          <ul class="navbar-list">

            <li class="navbar-item">
              <a href="index.php" class="navbar-link new" data-nav-link>Home</a>
            </li>

            <li class="navbar-item">
              <a href="features.html" class="navbar-link new" data-nav-link>Latest</a>
            </li>

            <li class="navbar-item">
              <a href="shop.html" class="navbar-link new" data-nav-link>Shop</a>
            </li>

            <li class="navbar-item">
              <a href="comments.html" class="navbar-link new" data-nav-link>Comments</a>
            </li>

            <li class="navbar-item">
              <a href="about.html" class="navbar-link new" data-nav-link>About Us</a>
            </li>

          </ul>
        </nav>

        <div class="header-actions">
          <!-- Inside <div class="header-actions"> before the nav-toggle-btn -->
          <button class="cart-icon-btn" aria-label="toggle cart">
            <ion-icon name="cart-outline"></ion-icon>
          </button>

          <button class="nav-toggle-btn" aria-label="toggle menu" data-nav-toggler>
            <ion-icon name="menu-outline" class="menu"></ion-icon>
            <ion-icon name="close-outline" class="close"></ion-icon>
          </button>

        </div>

      </div>
    </div>

  </header>
  <!-- cart-sidebar -->
  <!-- Add roles for accessibility -->
  <div class="cart-sidebar" role="complementary">
    <div class="cart-header">
      <h2>Cart</h2>
      <button class="close-cart-btn" aria-label="Close cart">
        <ion-icon name="close-outline"></ion-icon>
      </button>
    </div>
    <ul class="cart-items-list" role="list">
      <!-- Cart items will be dynamically added here -->
    </ul>
    <!-- Use type="button" to prevent accidental form submissions -->
    <button class="buy-now-btn" type="button">Buy Now</button>
    <button class="clear-cart-btn" type="button">Clear Cart</button>
  </div>

  <main>
    <article>



      <!-- shop -->
      <section class="section shop" id="shop" aria-label="shop"
        style="background-image: url('../assets/images/gamix-bg.jpg')">
        <div class="container">

          <h2 class="h2 section-title">
            Gamix <span class="span">Shop</span>
          </h2>

          <p class="section-text">
            You can get the premium quality equipments using our store.
          </p>

          <ul class="has-scrollbar">

            <li class="scrollbar-item">
              <div class="shop-card">

                <figure class="card-banner img-holder" style="--width: 300; --height: 260;">
                  <img src="../assets/images/shop-img-1.jpg" width="300" height="260" loading="lazy"
                    alt="Women Black T-Shirt" class="img-cover">
                </figure>

                <div class="card-content">

                  <a href="#" class="card-badge new">Gaming Chair</a>

                  <h3 class="h3">
                    <a href="#" class="card-title">Gamdias Aphrodite EF1 L B (Black) Gaming Chair</a>
                  </h3>

                  <div class="card-wrapper">
                    <p class="card-price">Rs.75000</p>

                    <button class="card-btn">
                      <ion-icon name="basket"></ion-icon>
                    </button>
                  </div>

                </div>

              </div>
            </li>

            <li class="scrollbar-item">
              <div class="shop-card">

                <figure class="card-banner img-holder" style="--width: 300; --height: 260;">
                  <img src="../assets/images/shop-img-2.jpg" width="300" height="260" loading="lazy"
                    alt="Gears 5 Xbox Controller" class="img-cover">
                </figure>

                <div class="card-content">

                  <a href="#" class="card-badge new">x-box</a>

                  <h3 class="h3">
                    <a href="#" class="card-title">Gears 5 Xbox one Controller</a>
                  </h3>

                  <div class="card-wrapper">
                    <p class="card-price">Rs.30000</p>

                    <button class="card-btn">
                      <ion-icon name="basket"></ion-icon>
                    </button>
                  </div>

                </div>

              </div>
            </li>

            <li class="scrollbar-item">
              <div class="shop-card">

                <figure class="card-banner img-holder" style="--width: 300; --height: 260;">
                  <img src="../assets/images/shop-img-3.jpeg" width="300" height="260" loading="lazy"
                    alt="GeForce RTX 2070" class="img-cover">
                </figure>

                <div class="card-content">

                  <a href="#" class="card-badge new">Graphics</a>

                  <h3 class="h3">
                    <a href="#" class="card-title">Nvidia GeForce RTX 4090 Ti</a>
                  </h3>

                  <div class="card-wrapper">
                    <p class="card-price">Rs.350000</p>

                    <button class="card-btn">
                      <ion-icon name="basket"></ion-icon>
                    </button>
                  </div>

                </div>

              </div>
            </li>

            <li class="scrollbar-item">
              <div class="shop-card">

                <figure class="card-banner img-holder" style="--width: 300; --height: 260;">
                  <img src="../assets/images/shop-img-4.jpg" width="300" height="260" loading="lazy"
                    alt="Virtual Reality Smiled" class="img-cover">
                </figure>

                <div class="card-content">

                  <a href="#" class="card-badge new">VR-Box</a>

                  <h3 class="h3">
                    <a href="#" class="card-title">Samsung Gear Vr Oculus</a>
                  </h3>

                  <div class="card-wrapper">
                    <p class="card-price">Rs.32000</p>

                    <button class="card-btn">
                      <ion-icon name="basket"></ion-icon>
                    </button>
                  </div>

                </div>

              </div>
            </li>

          </ul>

        </div>
      </section>


      <!--- footer -->

      <footer class="footer">

        <div class="ftop">
          <div class="container">

            <div class="fbrand">

              <a href="index.html" class="logo">Gamix</a>

              <div class="fbottom">
                <div class="container">

                  <p class="copyright">
                    &copy; 2024 Gamix. All Right Reserved.
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>

      </footer>

      <!-- up button -->

      <a href="#up" class="top-button" aria-label="going up" data-back-top-btn>
        <ion-icon name="caret-up"></ion-icon>
      </a>

      <!-- js links -->
      <script src="../assets/js/script.js" defer></script>
      <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
      <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>
      <script>
        document.addEventListener('DOMContentLoaded', () => {
  const cartBtn = document.querySelector('.cart-icon-btn');
  const closeCartBtn = document.querySelector('.close-cart-btn');
  const cartSidebar = document.querySelector('.cart-sidebar');
  const cartItemsList = document.querySelector('.cart-items-list');
  const clearCartBtn = document.querySelector('.clear-cart-btn');
  const buyNowBtn = document.querySelector('.buy-now-btn'); // Select the Buy Now button

  function saveCartItems(cartItems) {
    localStorage.setItem('cartItems', JSON.stringify(cartItems));
  }

  function loadCartItems() {
    return JSON.parse(localStorage.getItem('cartItems')) || [];
  }

  function updateCartUI() {
    cartItemsList.innerHTML = ''; // Clear the cart list UI
    const cartItems = loadCartItems();
    let total = 0;

    cartItems.forEach(item => {
      const li = document.createElement('li');
      li.textContent = `${item.title} - ${item.qty} x Rs.${item.price.toFixed(2)} = Rs.${(item.qty * item.price).toFixed(2)}`;
      cartItemsList.appendChild(li);
      total += item.qty * item.price;
    });

    // Add total to cart UI
    const totalElement = document.querySelector('.cart-total') || document.createElement('li');
    totalElement.classList.add('cart-total');
    totalElement.textContent = `Total: Rs.${total.toFixed(2)}`;
    cartItemsList.appendChild(totalElement);
  }

  function addToCart(itemElement) {
    const title = itemElement.querySelector('.card-title').textContent;
    const price = parseFloat(itemElement.querySelector('.card-price').textContent.replace('Rs.', '').trim());
    const cartItems = loadCartItems();
    const existingItem = cartItems.find(item => item.title === title);

    if (existingItem) {
      existingItem.qty += 1;
    } else {
      cartItems.push({
        title: title,
        price: price,
        qty: 1
      });
    }

    saveCartItems(cartItems);
    updateCartUI();
  }

  function clearCart() {
    localStorage.removeItem('cartItems');
    updateCartUI();
  }

  function checkout() {
    const cartItems = loadCartItems();
    if (cartItems.length === 0) {
      alert('Your cart is empty.');
      return;
    }
    const form = document.createElement('form');
    form.style.display = 'none';
    form.method = 'post';
    form.action = '../paymentform.php'; // Adjust this URL as needed
    cartItems.forEach(item => {
      const input = document.createElement('input');
      input.type = 'hidden';
      input.name = 'items[]';
      input.value = JSON.stringify(item);
      form.appendChild(input);
    });
    document.body.appendChild(form);
    form.submit();
  }

  cartBtn.addEventListener('click', () => {
    cartSidebar.classList.toggle('open');
  });

  closeCartBtn.addEventListener('click', () => {
    cartSidebar.classList.remove('open');
  });

  clearCartBtn.addEventListener('click', clearCart);

  buyNowBtn.addEventListener('click', checkout); // Event listener for Buy Now button

  // Use event delegation for dynamically added content
  document.addEventListener('click', event => {
    if (event.target.matches('.shop-card .card-btn') || event.target.closest('.shop-card .card-btn')) {
      const itemElement = event.target.closest('.shop-card');
      addToCart(itemElement);
    }
  });

  // Initialize the cart UI with any stored items
  updateCartUI();
});


      </script>
    </article>
  </main>
</body>

</html>